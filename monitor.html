<!DOCTYPE html>
<html>
<head>
  <title>–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 50px;
      background: #f0f2f5;
    }
    .status-card {
      display: inline-block;
      padding: 30px 50px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      background: white;
    }
    .status-indicator {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
    }
    .online {
      background: #4ade80;
      color: white;
    }
    .offline {
      background: #f87171;
      color: white;
    }
    .server-address {
      font-size: 18px;
      color: #666;
      margin: 10px 0;
    }
    .check-button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 30px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 20px;
      transition: all 0.3s;
    }
    .check-button:hover {
      background: #2563eb;
      transform: translateY(-2px);
    }
    .check-button:disabled {
      background: #94a3b8;
      cursor: wait;
    }
    .status-text {
      font-size: 24px;
      font-weight: bold;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="status-card">
    <h1>–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞</h1>
    
    <div id="status-indicator" class="status-indicator offline">?</div>
    
    <div class="server-address" id="server-address">54.38.117.77:7770</div>
    
    <div class="status-text" id="status-text">–°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω</div>
    
    <button class="check-button" id="check-button">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
    
    <div id="last-checked" style="color: #94a3b8; margin-top: 15px;">
      –ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –Ω–∏–∫–æ–≥–¥–∞
    </div>
  </div>

  <script>
    const server = {
      ip: "54.38.117.77",
      port: 7770
    };
    
    const statusIndicator = document.getElementById('status-indicator');
    const statusText = document.getElementById('status-text');
    const checkButton = document.getElementById('check-button');
    const lastChecked = document.getElementById('last-checked');
    const serverAddress = document.getElementById('server-address');
    
    serverAddress.textContent = `${server.ip}:${server.port}`;
    
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ —á–µ—Ä–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    function checkServerStatus() {
      return new Promise((resolve) => {
        const startTime = Date.now();
        const img = new Image();
        
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º favicon —Å–µ—Ä–≤–µ—Ä–∞ (–∏–ª–∏ –ª—é–±—É—é —Å—Ç–∞—Ç–∏–∫—É)
        img.src = `https://${server.ip}/favicon.ico?t=${Date.now()}`;
        
        img.onload = () => {
          resolve({ status: true, ping: Date.now() - startTime });
        };
        
        img.onerror = () => {
          // –ï—Å–ª–∏ favicon –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–±—É–µ–º –∫–æ—Ä–Ω–µ–≤–æ–π –ø—É—Ç—å
          const fallbackImg = new Image();
          fallbackImg.src = `https://${server.ip}/?t=${Date.now()}`;
          
          fallbackImg.onload = () => resolve({ status: true, ping: Date.now() - startTime });
          fallbackImg.onerror = () => resolve({ status: false });
        };
        
        // –¢–∞–π–º–∞—É—Ç 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => resolve({ status: false }), 3000);
      });
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    function updateStatus(status, ping) {
      if (status) {
        statusIndicator.className = 'status-indicator online';
        statusIndicator.innerHTML = '‚úì';
        statusText.textContent = `üü¢ ONLINE (${ping}–º—Å)`;
        statusText.style.color = '#4ade80';
      } else {
        statusIndicator.className = 'status-indicator offline';
        statusIndicator.innerHTML = '‚úï';
        statusText.textContent = 'üî¥ OFFLINE';
        statusText.style.color = '#f87171';
      }
      
      lastChecked.textContent = `–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞: ${new Date().toLocaleString('ru-RU')}`;
      checkButton.disabled = false;
      checkButton.textContent = '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–Ω–æ–≤–∞';
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏
    checkButton.addEventListener('click', async () => {
      checkButton.disabled = true;
      checkButton.textContent = '–ü—Ä–æ–≤–µ—Ä—è–µ–º...';
      statusIndicator.className = 'status-indicator offline';
      statusIndicator.innerHTML = '...';
      statusText.textContent = '–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å...';
      statusText.style.color = '#3b82f6';
      
      try {
        const result = await checkServerStatus();
        updateStatus(result.status, result.ping);
      } catch (error) {
        statusText.textContent = '–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏';
        statusText.style.color = '#f87171';
        checkButton.disabled = false;
        checkButton.textContent = '–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞';
      }
    });
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    checkButton.click();
  </script>
</body>
</html>
